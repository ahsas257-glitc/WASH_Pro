/* ============================================================
   WASH_Pro — Streamlit Modern Glassmorphism (Final Unified)
   Focus:
   - Full edge/corner coverage (no square corners anywhere)
   - Full widget coverage (inputs/spinner/labels/errors/hints/tooltips/menus)
   - Stable light/dark via tokens
   - Anti-bleed (no dark bands/shadow overlaps)
   ============================================================ */

/* ------------------------------
   0) Tokens
--------------------------------*/
:root{
  --radius-lg: 24px;
  --radius-md: 18px;
  --radius-sm: 14px;
  --radius-xs: 10px;

  --shadow-heavy: 0 20px 60px rgba(0,0,0,0.25);
  --shadow-medium: 0 12px 40px rgba(0,0,0,0.18);
  --shadow-light: 0 6px 24px rgba(0,0,0,0.12);
  --shadow-glow: 0 0 40px rgba(100,150,255,0.30);

  --blur-heavy: 24px;
  --blur-medium: 18px;
  --blur-light: 12px;

  --transition-fast: 0.18s ease;
  --transition-medium: 0.28s ease;

  /* Accent */
  --accent-blue: rgba(88,153,255,0.85);

  /* Light BG */
  --bg-light:
    radial-gradient(circle at 20% 10%, rgba(114,165,255,0.20) 0%, transparent 40%),
    radial-gradient(circle at 80% 30%, rgba(255,170,210,0.15) 0%, transparent 40%),
    linear-gradient(135deg, #f0f5ff 0%, #e8eeff 50%, #f8fbff 100%);

  /* Dark BG */
  --bg-dark:
    radial-gradient(circle at 20% 10%, rgba(88,153,255,0.15) 0%, transparent 40%),
    radial-gradient(circle at 80% 30%, rgba(255,85,170,0.10) 0%, transparent 40%),
    linear-gradient(135deg, #0a0f1a 0%, #121828 50%, #0c1120 100%);

  /* Glass */
  --glass-light-primary: rgba(255,255,255,0.72);
  --glass-light-secondary: rgba(255,255,255,0.55);
  --glass-light-tertiary: rgba(255,255,255,0.35);

  --glass-dark-primary: rgba(255,255,255,0.12);
  --glass-dark-secondary: rgba(255,255,255,0.085);
  --glass-dark-tertiary: rgba(255,255,255,0.055);

  /* Borders */
  --border-light: rgba(0,0,0,0.08);
  --border-light-strong: rgba(0,0,0,0.15);
  --border-dark: rgba(255,255,255,0.10);
  --border-dark-strong: rgba(255,255,255,0.18);

  /* Text */
  --text-light-primary: rgba(0,0,0,0.95);
  --text-light-secondary: rgba(0,0,0,0.75);
  --text-light-tertiary: rgba(0,0,0,0.55);
  --text-light-accent: #0066ff;

  --text-dark-primary: rgba(255,255,255,0.98);
  --text-dark-secondary: rgba(255,255,255,0.78);
  --text-dark-tertiary: rgba(255,255,255,0.58);
  --text-dark-accent: #5a9bff;

  /* Buttons */
  --button-light-primary: linear-gradient(135deg, rgba(88,153,255,0.92), rgba(125,100,255,0.92));
  --button-light-hover:   linear-gradient(135deg, rgba(100,170,255,0.96), rgba(140,120,255,0.96));

  --button-dark-primary:  linear-gradient(135deg, rgba(88,153,255,0.72), rgba(125,100,255,0.72));
  --button-dark-hover:    linear-gradient(135deg, rgba(100,170,255,0.82), rgba(140,120,255,0.82));

  /* Fields */
  --field-radius: 18px;
  --field-bg: rgba(255,255,255,0.06);
  --field-bg-focus: rgba(255,255,255,0.09);
  --field-border: rgba(255,255,255,0.14);
  --field-border-focus: rgba(88,153,255,0.55);
  --field-shadow: 0 10px 28px rgba(0,0,0,0.22);
  --field-shadow-focus: 0 0 0 3px rgba(88,153,255,0.18), 0 14px 34px rgba(0,0,0,0.25);

  /* Spinner hover */
  --spin-btn-bg: rgba(255,255,255,0.00);
  --spin-btn-bg-hover: rgba(255,255,255,0.10);

  /* Card padding unified */
  --card-pad: 1.35rem;

  /* Feedback colors */
  --c-info: rgba(33,150,243,0.95);
  --c-success: rgba(76,175,80,0.95);
  --c-warning: rgba(255,152,0,0.95);
  --c-error: rgba(244,67,54,0.95);
}

/* ------------------------------
   1) Theme mapping
--------------------------------*/
html[data-theme="light"], body.light{
  --bg: var(--bg-light);
  --glass-primary: var(--glass-light-primary);
  --glass-secondary: var(--glass-light-secondary);
  --glass-tertiary: var(--glass-light-tertiary);
  --border: var(--border-light);
  --border-strong: var(--border-light-strong);
  --text-primary: var(--text-light-primary);
  --text-secondary: var(--text-light-secondary);
  --text-tertiary: var(--text-light-tertiary);
  --text-accent: var(--text-light-accent);
  --button-primary: var(--button-light-primary);
  --button-hover: var(--button-light-hover);

  --field-bg: rgba(255,255,255,0.78);
  --field-bg-focus: rgba(255,255,255,0.94);
  --field-border: rgba(0,0,0,0.10);
  --field-border-focus: rgba(88,153,255,0.55);
  --field-shadow: 0 10px 24px rgba(0,0,0,0.10);
  --field-shadow-focus: 0 0 0 3px rgba(88,153,255,0.20), 0 14px 30px rgba(0,0,0,0.12);

  --spin-btn-bg: rgba(0,0,0,0.00);
  --spin-btn-bg-hover: rgba(0,0,0,0.06);
}

html[data-theme="dark"], body.dark{
  --bg: var(--bg-dark);
  --glass-primary: var(--glass-dark-primary);
  --glass-secondary: var(--glass-dark-secondary);
  --glass-tertiary: var(--glass-dark-tertiary);
  --border: var(--border-dark);
  --border-strong: var(--border-dark-strong);
  --text-primary: var(--text-dark-primary);
  --text-secondary: var(--text-dark-secondary);
  --text-tertiary: var(--text-dark-tertiary);
  --text-accent: var(--text-dark-accent);
  --button-primary: var(--button-dark-primary);
  --button-hover: var(--button-dark-hover);
}

/* fallback */
html:not([data-theme]){
  --bg: var(--bg-dark);
  --glass-primary: var(--glass-dark-primary);
  --glass-secondary: var(--glass-dark-secondary);
  --glass-tertiary: var(--glass-dark-tertiary);
  --border: var(--border-dark);
  --border-strong: var(--border-dark-strong);
  --text-primary: var(--text-dark-primary);
  --text-secondary: var(--text-dark-secondary);
  --text-tertiary: var(--text-dark-tertiary);
  --text-accent: var(--text-dark-accent);
  --button-primary: var(--button-dark-primary);
  --button-hover: var(--button-dark-hover);
}

/* ------------------------------
   2) App base + layout stability
--------------------------------*/
.stApp{
  background: var(--bg) !important;
  background-attachment: fixed !important;
  color: var(--text-primary) !important;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Inter", sans-serif !important;
  transition: background var(--transition-medium) !important;
}

/* Prevent random overlays / bleed */
.stApp, .main, .block-container{
  isolation: isolate !important;
}

header[data-testid="stHeader"]{
  background: transparent !important;
  border-bottom: none !important;
}
footer{ visibility:hidden !important; height:0 !important; padding:0 !important; margin:0 !important; }

.block-container{
  padding-top: 0.65rem !important;
  padding-left: 1.25rem !important;
  padding-right: 1.25rem !important;
  padding-bottom: 1.25rem !important;
  max-width: 100% !important;
}

/* Rhythm */
[data-testid="stVerticalBlock"]{ gap: 0.70rem !important; }

/* Columns stretch */
div[data-testid="stHorizontalBlock"]{ align-items: stretch !important; }
div[data-testid="column"]{
  display:flex !important;
  flex-direction:column !important;
  align-self:stretch !important;
  min-width: 0 !important;
}
div[data-testid="column"] > div{ width:100% !important; min-width: 0 !important; }

/* Typography */
h1,h2,h3,h4,h5,h6{
  color: var(--text-primary) !important;
  font-weight: 780 !important;
  letter-spacing: -0.01em !important;
}
p{ color: var(--text-secondary) !important; }
small, .stCaption, .stMarkdown small{ color: var(--text-tertiary) !important; }
a, a:visited{ color: var(--text-accent) !important; }

/* ------------------------------
   3) Remove Streamlit grey layers (safe)
--------------------------------*/
div[data-testid="stVerticalBlockBorderWrapper"],
div[data-testid="stVerticalBlock"],
div[data-testid="stHorizontalBlock"]{
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}
div[data-testid="stExpander"]{
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

/* ------------------------------
   4) Sidebar
--------------------------------*/
section[data-testid="stSidebar"]{
  background: var(--glass-primary) !important;
  border: 1px solid var(--border) !important;
  border-radius: var(--radius-lg) !important;
  overflow: hidden !important;
  box-shadow: var(--shadow-heavy) !important;
  backdrop-filter: blur(var(--blur-heavy)) saturate(1.4) !important;
  -webkit-backdrop-filter: blur(var(--blur-heavy)) saturate(1.4) !important;
  margin: 0.8rem !important;
  transition: all var(--transition-medium) !important;
}
section[data-testid="stSidebar"] > div{
  padding: 1.15rem 1.05rem !important;
  background: transparent !important;
}
section[data-testid="stSidebar"] *{
  font-size: 12.5px !important;
  line-height: 1.25 !important;
  color: var(--text-primary) !important;
}
section[data-testid="stSidebar"] h1,
section[data-testid="stSidebar"] h2,
section[data-testid="stSidebar"] h3{
  font-size: 14px !important;
  margin: 0.35rem 0 0.55rem 0 !important;
  font-weight: 820 !important;
}
section[data-testid="stSidebar"] label{ font-size: 12px !important; opacity: 0.86 !important; }

/* ------------------------------
   5) Cards — unified + edge-safe
--------------------------------*/
.glass-card,
.pure-glass-card,
.t6-card,
.t6-rowcard,
.t6-box,
.t6-s7-card,
.t6-s8-wrap .t6-card,
.t6-s10-sticky,
.t6-s9-sticky{
  position: relative !important;
  overflow: hidden !important;                /* ✅ clip corners */
  isolation: isolate !important;              /* ✅ prevent bleed */
  background: var(--glass-secondary) !important;
  border: 1px solid var(--border) !important;
  border-radius: var(--radius-md) !important;
  box-shadow: var(--shadow-medium) !important;
  backdrop-filter: blur(var(--blur-medium)) saturate(1.25) !important;
  -webkit-backdrop-filter: blur(var(--blur-medium)) saturate(1.25) !important;
  transition: all var(--transition-medium) !important;
}

.glass-card,
.pure-glass-card{
  padding: var(--card-pad) !important;
  margin-bottom: 1.0rem !important;
}

.t6-card,
.t6-rowcard,
.t6-box,
.t6-s7-card{
  padding: 14px !important;
  margin-bottom: 12px !important;
}

.glass-card:hover,
.pure-glass-card:hover,
.t6-card:hover,
.t6-rowcard:hover,
.t6-box:hover,
.t6-s7-card:hover{
  box-shadow: var(--shadow-heavy), var(--shadow-glow) !important;
  transform: translateY(-2px) !important;
  border-color: var(--border-strong) !important;
}

.glass-card-mini{
  position: relative !important;
  overflow: hidden !important;
  isolation: isolate !important;
  background: var(--glass-tertiary) !important;
  border: 1px solid var(--border) !important;
  border-radius: var(--radius-sm) !important;
  box-shadow: var(--shadow-light) !important;
  backdrop-filter: blur(var(--blur-light)) saturate(1.2) !important;
  -webkit-backdrop-filter: blur(var(--blur-light)) saturate(1.2) !important;
  padding: 1.05rem !important;
  margin-bottom: 0.85rem !important;
}

/* Prevent nested wrappers from adding backgrounds inside cards */
.pure-glass-card .element-container,
.pure-glass-card .stMarkdown,
.pure-glass-card .stDataFrame,
.pure-glass-card .stMetric{
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

/* ------------------------------
   6) Expander (card-like + edge-safe)
--------------------------------*/
div[data-testid="stExpander"] > details{
  background: var(--glass-secondary) !important;
  border: 1px solid var(--border) !important;
  border-radius: var(--radius-md) !important;
  overflow: hidden !important;                /* ✅ clip edges */
  box-shadow: var(--shadow-light) !important;
}
div[data-testid="stExpander"] > details > summary{
  padding: 0.85rem 1rem !important;
  color: var(--text-primary) !important;
}
div[data-testid="stExpander"] > details[open]{ box-shadow: var(--shadow-medium) !important; }

/* ------------------------------
   7) Inputs / Select / Textarea / Datepicker (full + edge-safe)
--------------------------------*/
div[data-baseweb="input"],
div[data-baseweb="textarea"],
div[data-baseweb="select"],
div[data-baseweb="datepicker"]{
  border-radius: var(--field-radius) !important;
  overflow: hidden !important;                 /* ✅ clip corners */
  background: var(--field-bg) !important;
  border: 1px solid var(--field-border) !important;
  box-shadow: var(--field-shadow) !important;
  backdrop-filter: blur(var(--blur-light)) saturate(1.15) !important;
  -webkit-backdrop-filter: blur(var(--blur-light)) saturate(1.15) !important;
  transition: all var(--transition-fast) !important;

  position: relative !important;
  z-index: 1 !important;                      /* ✅ anti-bleed */
}

div[data-baseweb="input"] > div,
div[data-baseweb="textarea"] > div,
div[data-baseweb="select"] > div,
div[data-baseweb="datepicker"] > div{
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  border-radius: inherit !important;
  overflow: hidden !important;
}

div[data-baseweb="input"]:focus-within,
div[data-baseweb="textarea"]:focus-within,
div[data-baseweb="select"]:focus-within,
div[data-baseweb="datepicker"]:focus-within{
  border-color: var(--field-border-focus) !important;
  box-shadow: var(--field-shadow-focus) !important;
  background: var(--field-bg-focus) !important;
}

div[data-baseweb="input"] input,
div[data-baseweb="textarea"] textarea{
  color: var(--text-primary) !important;
  background: transparent !important;
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
}

div[data-baseweb="input"] input::placeholder,
div[data-baseweb="textarea"] textarea::placeholder{
  color: var(--text-tertiary) !important;
  opacity: 0.85 !important;
}

/* Enhancers (eye icon, etc.) */
div[data-baseweb="input"] [data-baseweb="end-enhancer"],
div[data-baseweb="input"] [data-baseweb="start-enhancer"]{
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

/* Labels + helper/description text */
label,
.stTextInput label,
.stSelectbox label,
.stTextArea label,
.stNumberInput label,
.stDateInput label,
.stMultiSelect label{
  color: var(--text-secondary) !important;
  font-weight: 680 !important;
  margin-bottom: 0.35rem !important;
}

/* Help icon button (the small ?) – keep it clean */
button[data-testid="stHelpIcon"],
button[aria-label="Help"]{
  border-radius: 999px !important;
  background: transparent !important;
  border: 1px solid transparent !important;
}
button[data-testid="stHelpIcon"]:hover,
button[aria-label="Help"]:hover{
  background: rgba(127,127,127,0.12) !important;
  border-color: var(--border) !important;
}

/* ------------------------------
   8) ✅ Number input spinner (+/-) — TRUE single unified box
   Fixes split-box look and wrong corners like your screenshot
--------------------------------*/
div[data-baseweb="spinner"]{
  border-radius: var(--field-radius) !important;
  overflow: hidden !important;                 /* ✅ clip edges */
  background: var(--field-bg) !important;
  border: 1px solid var(--field-border) !important;
  box-shadow: var(--field-shadow) !important;
  backdrop-filter: blur(var(--blur-light)) saturate(1.15) !important;
  -webkit-backdrop-filter: blur(var(--blur-light)) saturate(1.15) !important;
  transition: all var(--transition-fast) !important;

  display: flex !important;                    /* ✅ single row control */
  align-items: stretch !important;

  position: relative !important;
  z-index: 1 !important;                       /* ✅ anti-bleed */
}

div[data-baseweb="spinner"] > div{
  flex: 1 1 auto !important;
  display: flex !important;
  align-items: stretch !important;
  gap: 0 !important;

  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  padding: 0 !important;
  margin: 0 !important;
  min-width: 0 !important;
}

/* Some builds have an extra wrapper – keep it safe */
div[data-baseweb="spinner"] > div > div{
  display: flex !important;
  align-items: stretch !important;
  gap: 0 !important;
  flex: 1 1 auto !important;
  min-width: 0 !important;
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

div[data-baseweb="spinner"] input{
  flex: 1 1 auto !important;
  min-width: 0 !important;

  background: transparent !important;
  border: none !important;
  outline: none !important;
  box-shadow: none !important;

  color: var(--text-primary) !important;
  font-weight: 700 !important;

  padding: 10px 12px !important;
  line-height: 1.2 !important;
}

/* Buttons inside same box (no detached panel) */
div[data-baseweb="spinner"] button{
  flex: 0 0 auto !important;

  background: transparent !important;
  border: none !important;
  box-shadow: none !important;

  color: var(--text-primary) !important;
  font-weight: 900 !important;

  min-width: 44px !important;
  min-height: 42px !important;

  padding: 0 !important;
  margin: 0 !important;

  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;

  transition: all var(--transition-fast) !important;
}

/* Divider lines between areas */
div[data-baseweb="spinner"] button:first-of-type{
  border-left: 1px solid var(--field-border) !important;
}
div[data-baseweb="spinner"] button + button{
  border-left: 1px solid var(--field-border) !important;
}

div[data-baseweb="spinner"] button:hover{
  background: var(--spin-btn-bg-hover) !important;
}
div[data-baseweb="spinner"] button:active{
  background: var(--spin-btn-bg-hover) !important;
}

div[data-baseweb="spinner"] [role="separator"],
div[data-baseweb="spinner"] hr{
  display: none !important;
}

div[data-baseweb="spinner"]:focus-within{
  border-color: var(--field-border-focus) !important;
  box-shadow: var(--field-shadow-focus) !important;
  background: var(--field-bg-focus) !important;
}

/* Sidebar spacing for fields */
section[data-testid="stSidebar"] div[data-baseweb="input"],
section[data-testid="stSidebar"] div[data-baseweb="textarea"],
section[data-testid="stSidebar"] div[data-baseweb="select"],
section[data-testid="stSidebar"] div[data-baseweb="spinner"]{
  margin: 0.30rem 0 !important;
}

/* ------------------------------
   9) Menus / listbox / multiselect tags / popovers (edge-safe)
--------------------------------*/
ul[role="listbox"],
div[data-baseweb="menu"]{
  background: var(--glass-secondary) !important;
  border: 1px solid var(--border) !important;
  border-radius: var(--radius-sm) !important;
  overflow: hidden !important;
  box-shadow: var(--shadow-heavy) !important;
  backdrop-filter: blur(var(--blur-medium)) saturate(1.3) !important;
  -webkit-backdrop-filter: blur(var(--blur-medium)) saturate(1.3) !important;
  margin-top: 0.5rem !important;
}

ul[role="listbox"] li{
  color: var(--text-primary) !important;
  padding: 0.70rem 1rem !important;
  transition: background-color var(--transition-fast) !important;
}
ul[role="listbox"] li:hover{ background: rgba(127,127,127,0.15) !important; }
ul[role="listbox"] li[aria-selected="true"]{ background: rgba(127,127,127,0.25) !important; }

div[data-baseweb="tag"]{
  background: rgba(127,127,127,0.20) !important;
  border: 1px solid var(--border) !important;
  border-radius: 999px !important;
  padding: 0.20rem 0.70rem !important;
  margin: 0.25rem !important;
}
div[data-baseweb="tag"] span{ color: var(--text-primary) !important; }

/* ------------------------------
   10) Tooltip / Hint / Popover (full)
--------------------------------*/
/* BaseWeb tooltip/popover surfaces */
div[data-baseweb="tooltip"],
div[data-baseweb="popover"],
div[role="tooltip"]{
  background: var(--glass-secondary) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border) !important;
  border-radius: var(--radius-sm) !important;
  box-shadow: var(--shadow-heavy) !important;
  overflow: hidden !important;
  backdrop-filter: blur(var(--blur-medium)) saturate(1.3) !important;
  -webkit-backdrop-filter: blur(var(--blur-medium)) saturate(1.3) !important;
}

/* Streamlit tooltip content wrapper (varies by version) */
div[data-testid="stTooltipContent"]{
  background: var(--glass-secondary) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border) !important;
  border-radius: var(--radius-sm) !important;
  box-shadow: var(--shadow-heavy) !important;
  overflow: hidden !important;
}

/* ------------------------------
   11) Buttons (global)
--------------------------------*/
.stButton > button{
  border-radius: var(--radius-sm) !important;
  border: none !important;
  background: var(--button-primary) !important;
  color: #fff !important;
  font-weight: 750 !important;
  padding: 0.72rem 1.6rem !important;
  transition: all var(--transition-fast) !important;
  box-shadow: var(--shadow-light) !important;
  white-space: nowrap !important;
}
.stButton > button:hover{
  background: var(--button-hover) !important;
  transform: translateY(-2px) !important;
  box-shadow: var(--shadow-medium) !important;
}
.stButton > button:active{ transform: translateY(0) !important; }
.stButton > button:focus{
  outline: none !important;
  box-shadow: 0 0 0 3px rgba(88,153,255,0.38) !important;
}

/* Secondary */
.stButton > button[kind="secondary"],
.stButton > button[data-testid="baseButton-secondary"]{
  background: var(--glass-tertiary) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border) !important;
}

/* Sidebar buttons */
section[data-testid="stSidebar"] .stButton > button{
  width: 100% !important;
  min-height: 2.35rem !important;
  padding: 0.45rem 0.90rem !important;
}

/* ------------------------------
   12) File uploader
--------------------------------*/
div[data-testid="stFileUploader"] section{
  background: var(--glass-tertiary) !important;
  border: 1px dashed var(--border-strong) !important;
  border-radius: var(--radius-md) !important;
  overflow: hidden !important;
  box-shadow: var(--shadow-light) !important;
  backdrop-filter: blur(var(--blur-light)) saturate(1.15) !important;
}
div[data-testid="stFileUploader"] section:hover{
  border-color: var(--field-border-focus) !important;
  box-shadow: var(--shadow-medium) !important;
}

/* ------------------------------
   13) Tables / DataFrame
--------------------------------*/
.stTable,
div[data-testid="stDataFrame"]{
  background: var(--glass-tertiary) !important;
  border-radius: var(--radius-sm) !important;
  border: 1px solid var(--border) !important;
  overflow: hidden !important;
  box-shadow: var(--shadow-light) !important;
  backdrop-filter: blur(var(--blur-light)) saturate(1.2) !important;
  -webkit-backdrop-filter: blur(var(--blur-light)) saturate(1.2) !important;
}
div[data-testid="stDataFrame"] *{ color: var(--text-primary) !important; }

/* ------------------------------
   14) Tabs
--------------------------------*/
.stTabs [data-baseweb="tab-list"]{
  background: var(--glass-tertiary) !important;
  border-radius: var(--radius-sm) !important;
  padding: 0.45rem !important;
  gap: 0.45rem !important;
}
.stTabs [data-baseweb="tab"]{
  background: transparent !important;
  color: var(--text-secondary) !important;
  border-radius: var(--radius-xs) !important;
  padding: 0.70rem 1.35rem !important;
  transition: all var(--transition-fast) !important;
}
.stTabs [aria-selected="true"]{
  background: var(--button-primary) !important;
  color: #fff !important;
  box-shadow: var(--shadow-light) !important;
}

/* ------------------------------
   15) Alerts / Errors / Exceptions / Status
   (covers info/warning/error/success + rounded edges)
--------------------------------*/
div[data-testid="stAlert"]{
  position: relative !important;
  overflow: hidden !important;
  border-radius: var(--radius-md) !important;
  background: var(--glass-secondary) !important;
  border: 1px solid var(--border) !important;
  box-shadow: var(--shadow-light) !important;
  backdrop-filter: blur(var(--blur-light)) saturate(1.2) !important;
  -webkit-backdrop-filter: blur(var(--blur-light)) saturate(1.2) !important;
}
div[data-testid="stAlert"] > div{
  border-radius: inherit !important;
  overflow: hidden !important;
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

/* Python exception blocks sometimes appear as stException */
div[data-testid="stException"]{
  border-radius: var(--radius-md) !important;
  overflow: hidden !important;
  border: 1px solid rgba(244,67,54,0.35) !important;
  background: rgba(244,67,54,0.10) !important;
  box-shadow: var(--shadow-light) !important;
}

/* Status element (if used) */
div[data-testid="stStatusWidget"]{
  border-radius: var(--radius-md) !important;
  overflow: hidden !important;
  border: 1px solid var(--border) !important;
  background: var(--glass-secondary) !important;
  box-shadow: var(--shadow-light) !important;
}

/* ------------------------------
   16) Wizard/nav rows should be above shadows (anti dark-band)
--------------------------------*/
.wiz-nav, .wizard-nav-container{
  position: relative !important;
  z-index: 5 !important;
}

/* ------------------------------
   17) Page frame helpers
--------------------------------*/
.page-center{
  min-height: calc(100vh - 6rem);
  display:flex;
  align-items:center;
  justify-content:center;
}
.page-frame{
  width: min(1100px, 94vw);
  padding: 28px 28px 22px 28px;
  border-radius: 20px;
  border: 1px solid var(--border-strong);
  background: var(--glass-secondary);
  overflow: hidden !important;
  box-shadow:
    0 0 0 1px rgba(255,255,255,0.06),
    0 18px 45px rgba(0,0,0,0.35),
    0 0 32px rgba(90,140,255,0.15);
}

/* ------------------------------
   18) Cards.py structural classes (gc-*)
--------------------------------*/
.gc-card{
  position: relative !important;
  overflow: hidden !important;
  isolation: isolate !important;
}
.gc-inner{ padding: 0 !important; }

.gc-header{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap: 12px;
  margin-bottom: 0.10rem;
}
.gc-header-left{ min-width: 0; }
.gc-title{
  margin: 0 0 0.40rem 0 !important;
  color: var(--text-primary) !important;
  font-weight: 820 !important;
  font-size: 1.22rem !important;
  line-height: 1.25 !important;
}
.gc-subtitle{
  margin: 0 !important;
  color: var(--text-secondary) !important;
  opacity: 0.92 !important;
  font-size: 0.96rem !important;
  line-height: 1.45 !important;
}
.gc-header-right{ flex: 0 0 auto; padding-top: 0.10rem; }
.gc-chip{
  display:inline-flex;
  align-items:center;
  padding: 0.40rem 0.90rem;
  border-radius: 999px;
  background: var(--glass-tertiary);
  border: 1px solid var(--border);
  color: var(--text-primary);
  font-size: 0.90rem;
  font-weight: 700;
  box-shadow: var(--shadow-light);
  backdrop-filter: blur(var(--blur-light)) saturate(1.2);
  -webkit-backdrop-filter: blur(var(--blur-light)) saturate(1.2);
}
.gc-divider{
  height: 1px;
  width: 100%;
  margin: 0.85rem 0 1.05rem 0;
  background: linear-gradient(90deg, transparent, var(--border-strong), transparent);
  opacity: 0.9;
}
.gc-body{ margin-top: 0.95rem; }

.pure-glass-card.transparent{ background: var(--glass-tertiary) !important; }
.pure-glass-card.frosted{
  backdrop-filter: blur(calc(var(--blur-heavy) + 6px)) saturate(1.55) !important;
  -webkit-backdrop-filter: blur(calc(var(--blur-heavy) + 6px)) saturate(1.55) !important;
}
.pure-glass-card.tight{ padding: 1.10rem !important; }
.pure-glass-card.soft{ box-shadow: var(--shadow-light) !important; }

.gc-card .element-container,
.gc-card .stMarkdown,
.gc-card .stDataFrame,
.gc-card .stMetric{
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

/* ------------------------------
   19) Responsive
--------------------------------*/
@media (max-width: 768px){
  :root{
    --radius-lg: 20px;
    --radius-md: 16px;
    --radius-sm: 12px;
    --blur-heavy: 20px;
    --blur-medium: 16px;
    --blur-light: 10px;
    --card-pad: 1.05rem;
  }
  .block-container{ padding: 0.9rem !important; }
  section[data-testid="stSidebar"]{ margin: 0.5rem !important; }
}

@media (min-width: 1200px){
  .block-container{
    max-width: 1400px !important;
    margin: 0 auto !important;
  }
}
